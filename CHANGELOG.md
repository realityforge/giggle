# Change Log

### Unreleased

* Upgrade the `au.com.stocksoftware.idea.codestyle` artifact to version `1.17`.

### [v0.13](https://github.com/realityforge/giggle/tree/v0.13) (2020-12-21) · [Full Changelog](https://github.com/realityforge/giggle/compare/v0.12...v0.13)

* Ensure that the generated `Args` class uses a camel-case name in types other than `Query` and `Mutation` where the type is prefixed to the field name.

### [v0.12](https://github.com/realityforge/giggle/tree/v0.12) (2020-11-16) · [Full Changelog](https://github.com/realityforge/giggle/compare/v0.11...v0.12)

* Ensure that aliases are retained when queries fragments are compressed. A bug resulted in aliases being omitted and invalid queries being passed to the server.

### [v0.11](https://github.com/realityforge/giggle/tree/v0.11) (2020-10-29) · [Full Changelog](https://github.com/realityforge/giggle/compare/v0.10...v0.11)

* Upgrade the `com.squareup` artifact to version `1.13.0`.
* Generate a GraphQLException if we get http exceptions or timeouts when communicating with the GraphQL endpoint.

### [v0.10](https://github.com/realityforge/giggle/tree/v0.10) (2020-02-20) · [Full Changelog](https://github.com/realityforge/giggle/compare/v0.09...v0.10)

* Change the default behaviour of the `java-client` generator so that the query string inlines fragments. This usually results in a significantly smaller query string but may result in a larger query if the fragment is reused multiple times within the same operation. This behaviour can be reverted to the previous behaviour by setting the property `java.inline_fragments` to `false`.
* Change the default behaviour of the `java-client` generator to omit or compress the operation name sent to the server. This behaviour can be reverted to the previous behaviour by setting the property `java.omit_operation_name` to `false`.

### [v0.09](https://github.com/realityforge/giggle/tree/v0.09) (2020-02-19) · [Full Changelog](https://github.com/realityforge/giggle/compare/v0.08...v0.09)

* Upgrade the `org.realityforge.guiceyloops` artifact to version `0.106`.
* Upgrade the `com.squareup` artifact to version `1.12.0`.
* Upgrade the `org.realityforge.gir` artifact to version `0.11`.
* Cleanup the compiler code so that it does not generate any type errors when enabling the linter.
* Update `FixtureTest` so that it lints over generated code.
* Upgrade to version `14.0` of the `graphql-java` library.

### [v0.08](https://github.com/realityforge/giggle/tree/v0.08) (2019-09-10) · [Full Changelog](https://github.com/realityforge/giggle/compare/v0.07...v0.08)

* Enhance the `java-client` generator to produce a `GraphQLException` class. The class will be used when if there is an error preparing, transmitting or receiving the GraphQL requests.
* Upgrade the `org.realityforge.javax.annotation` artifact to version `1.0.1`.
* Upgrade the `org.realityforge.keycloak.client.authfilter:keycloak-jaxrs-client-authfilter` artifact to version `1.02`.
* Throw a `GraphQLException` from the client generated by `java-cdi-client` if the client is integrated with keycloak but is unable to retrieve authentication token.
* Enhance the `java-cdi-client` generator so that it specifies a connect timeout and a read timeout when generating the jaxrs client to connect to the GraphQL endpoint. The timeouts default to 10 seconds but can be explicitly configured by specifying the properties `cdi.connect_timeout` and/or `cdi.read_timeout`.
* Throw a `GraphQLException` from the client generated by the `java-cdi-client` if the HTTP call to the GraphQL endpoint is not successful.

### [v0.07](https://github.com/realityforge/giggle/tree/v0.07) (2019-09-09) · [Full Changelog](https://github.com/realityforge/giggle/compare/v0.06...v0.07)

* Upgrade the `org.realityforge.keycloak.client.authfilter:keycloak-jaxrs-client-authfilter` artifact to version `1.01`.
* Add local validation to ensure top-level fields inside operations are defined by the schema.
* Remove support for `Date` and `DateTime` scalars and instead add support for the following temporal scalars.
    - `TimeZone`: Emitted as NormalizedCustomID as specified in java.util.TimeZone
    - `Instant`: Formatted as `ISO_INSTANT`
    - `Duration`: Duration is the ISO 8601 seconds based representation.
    - `Period`: ISO 8661 Period representation
    - `LocalDate`: `ISO_LOCAL_DATE`
    - `LocalTime`: `ISO_LOCAL_TIME`
    - `LocalDateTime`: `ISO_LOCAL_DATE_TIME`
    - `ZonedDateTime`: `ISO_ZONED_DATE_TIME`
    - `ZoneID`: ZoneID as specified in java.time.ZoneId
    - `ZoneOffset`: Zone offset as specified in java.tim.ZoneOffset
    - `OffsetDateTime`: `ISO_OFFSET_DATE_TIME`
    - `OffsetTime`: `ISO_OFFSET_TIME`

### [v0.06](https://github.com/realityforge/giggle/tree/v0.06) (2019-08-19) · [Full Changelog](https://github.com/realityforge/giggle/compare/v0.05...v0.06)

* Upgrade the `org.realityforge.guiceyloops` artifact to version `0.102`.
* Upgrade the `au.com.stocksoftware.idea.codestyle` artifact to version `1.14`.
* Upgrade the Generator API so that each generator can declare properties that they will use during the generation process. These properties can be required for the generator to run or optional. The commandline interface has also been updated to emit the generators and the supported properties as part of the `--help` command.
* Add a generator named `java-cdi-client` that generates a CDI service that exposes a separate method for invoking every operation declared in the document. The generator makes use of the new property system and requires several properties to control how the service is generated. The `cdi.service.name` property controls the name of the generated service, while the properties `cdi.base_url.jndi_name` and `cdi.url.suffix` control the way that the service determines the url of the GraphQL server. The `cdi.keycloak.client.name` property controls whether keycloak support is added to the generated service.

### [v0.05](https://github.com/realityforge/giggle/tree/v0.05) (2019-06-18) · [Full Changelog](https://github.com/realityforge/giggle/compare/v0.04...v0.05)

#### java-client generator

* Stop generating an error if an operation of type `Subscription` is present and instead just skip generation of all artifacts for the operation.
* Stop generating the "...compact, minimized graphql document for each GraphQL operation" as the document (a.k.a. the query) is now generated as a static final field on the query type.
* Generate classes to represent input types. The classes are able to be serialized to json using json-b.
* Generate a static inner class named `Question` in the operation class that represents the request sent to the server. The `Question` class contains a reference to a `Variables` value that contains any variables defined by the operation as well as a query property that defines the query sent to the server.
* Reduce the access level of the `QUERY` field on the operation class to private as requests should be generated by instantiating instances of the `Question` class.

### [v0.04](https://github.com/realityforge/giggle/tree/v0.04) (2019-06-17) · [Full Changelog](https://github.com/realityforge/giggle/compare/v0.03...v0.04)

* Upgrade the `org.realityforge.getopt4j` artifact to version `1.3`.
* Remove reflection based integration tests (i.e. `EnumTest`) and related infrastructure (i.e. `AbstractIntegrationTest` and `CompileResults`) as fixture based tests combined with the codegen integration tests have proved to be a more effective mechanisms for testing output.
* Upgrade to version `13.0` of the `graphql-java` library. This resulted in improved code generation as the nodes within the GraphQL schema are now ordered based on appearance in source document rather than based lexicographically. The library also fixed an off-by-one error when reporting parse and validation errors that was exposed in giggle error messages.
* Generate an error if an anonymous operation is defined in a document. Anonymous operations are not supported as the name is used by generators when generating various artifacts.

#### java-client generator

* Change the name of the the response object from `[OperationName][OperationType]Response` to `[OperationName]Response`. As operation names must be unique within a document, the additional `[OperationType]` name modifier does not increase the uniqueness of the name but does increase the verbosity of the generated API.
* Generate a class `GraphQLError` that represents an error returned by the server. The fields in this class comply with the specification as outlined in [Section 7.1.2](https://graphql.github.io/graphql-spec/draft/#sec-Errors) of the specification. Not all server implementations strictly adhere to this format and any data that is not represented in this format is not available if this class is used to represent errors.
* Generate a class `[OperationName][OperationType]` that contains an static inner class `Answer` that represents the complete response message returned by the end point. The top level class also contains a minimized, self-contained, document for the query that is read to be sent to the server.

### [v0.03](https://github.com/realityforge/giggle/tree/v0.03) (2019-06-13) · [Full Changelog](https://github.com/realityforge/giggle/compare/v0.02...v0.03)

* Refactor the test infrastructure to support multiple generators and to process graphql documents as well as graphql schemas.

#### java-client generator

* Initial implementation of the `java-client` to generate the java native infrastructure for invoking GraphQL operations. The first phase generates:
  - the enum types for every enum in the schema.
  - a compact, minimized graphql document for each GraphQL operation that only contains the operation and any referenced fragments.
  - a java bean representing the response data for each GraphQL operation. The object form is designed to be compatible with JSON-B and Jackson json serialization formats. The response object contains fields for each selection in the operation and static inner classes for all complex sub-selections. The response object is named using the pattern `[OperationName][OperationType]Response`. i.e. The response object for the `event` query is represented by a bean named `EventQueryResponse` while the `updateEvent` mutation is named `UpdateEventMutationResponse`.

### [v0.02](https://github.com/realityforge/giggle/tree/v0.02) (2019-06-11) · [Full Changelog](https://github.com/realityforge/giggle/compare/v0.01...v0.02)

#### java-server generator

* Remove final qualifier on `toString()`, `hashCode()` and `equals(Object)` methods in generated input classes. The final qualifier is unnecessary as the class is final.
* Fix bug where the private method `maybeCoerceID(...)` was generated on `*Args` type but was not used. This bug presented when when the type was `[ID!]! @numeric`.

### [v0.01](https://github.com/realityforge/giggle/tree/v0.01) (2019-06-11) · [Full Changelog](https://github.com/realityforge/giggle/compare/f99bb23e8e6ddeeeb17b79e337f84fdd539308a0...v0.01)

 ‎🎉	Initial super-alpha release ‎🎉.
